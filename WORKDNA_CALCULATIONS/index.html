
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Solid/">
      
      
        <link rel="next" href="../admonitions/">
      
      
        
      
      
      <link rel="icon" href="../assets/favicon.jpeg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>WORKDNA CALCULATIONS - KarreraAI Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#workdna-calculations-full-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="KarreraAI Docs" class="md-header__button md-logo" aria-label="KarreraAI Docs" data-md-component="logo">
      
  <img src="../assets/KarreraLogo.jpeg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KarreraAI Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              WORKDNA CALCULATIONS
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="deep-purple"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="KarreraAI Docs" class="md-nav__button md-logo" aria-label="KarreraAI Docs" data-md-component="logo">
      
  <img src="../assets/KarreraLogo.jpeg" alt="logo">

    </a>
    KarreraAI Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to KarreraAI Docs
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Front-Doc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FrontEnd - Doc
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Personal-AI-APIs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Personal-AI APIs
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Runbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Karrera Infra Runbook
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Solid
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    WORKDNA CALCULATIONS
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    WORKDNA CALCULATIONS
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workdna-calculations-full-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        WorkDNA Calculations – Full Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Core Concepts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-global-constants-and-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Global Constants and Calibration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Global Constants and Calibration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-master-xp-and-source-limits" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Master XP and Source Limits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-growth-exponents" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Growth Exponents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-mastery-durations" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Mastery Durations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-derived-c-coefficients" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Derived C Coefficients
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-growth-types-lookup-growth_types" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.5 Growth Types Lookup (GROWTH_TYPES)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-level-scaling-constants" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.6 Level Scaling Constants
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-decay-floor" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.7 Decay Floor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-utility-functions-and-their-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Utility Functions and Their Variables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Utility Functions and Their Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-probability_to_xpprobability-float-capability_xp-int-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 probability_to_xp(probability: float, capability_xp: int) -&gt; int
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-get_volatility_rate-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 get_volatility_rate() -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-get_decay_base-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 get_decay_base() -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-get_capability_growth_paramsgrowth_type-str-c-k" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 get_capability_growth_params(growth_type: str) -&gt; (C, k)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-get_time_consumption_mock-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5 get_time_consumption_mock(...) -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-duration_growth_factorduration_months-float-growth_type-str-linear-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.6 duration_growth_factor(duration_months: float, growth_type: str = "linear") -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37-max_xp_at_masterygrowth_type-str-source_weight-int-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.7 max_xp_at_mastery(growth_type: str, source_weight: int) -&gt; float
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-xp-level-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. XP ↔ Level Conversion
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. XP ↔ Level Conversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-xp_to_levelxp-int-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 xp_to_level(xp: int) -&gt; float
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 xp_to_level(xp: int) -&gt; float">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-values-illustrative" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example values (illustrative)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-xp-level-logarithmic-curve" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – XP → Level (logarithmic curve)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-level_to_xplevel-float-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 level_to_xp(level: float) -&gt; int
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-source-weighting" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Source Weighting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Source Weighting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-source_to_weightsource-optionalstr-end_date-optionaldatetime-none-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 source_to_weight(source: Optional[str], end_date: Optional[datetime] = None) -&gt; int
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-workdna-aggregation-from-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. WorkDNA Aggregation from Capabilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. WorkDNA Aggregation from Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-compute_workdnacapabilities-listdict-dictstr-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 compute_workdna(capabilities: List[Dict]) -&gt; Dict[str, int]
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 compute_workdna(capabilities: List[Dict]) -&gt; Dict[str, int]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-from-capabilities-to-node-xp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – From Capabilities to Node XP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-calculate_new_node_levelprevious_node_level-float-xp-int-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 calculate_new_node_level(previous_node_level: float, xp: int) -&gt; float
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 calculate_new_node_level(previous_node_level: float, xp: int) -&gt; float">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-incremental-level-update" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – Incremental Level Update
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-full-capability-xp-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Full Capability XP Calculation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Full Capability XP Calculation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-calculate_node_xp-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 calculate_node_xp(...) -&gt; int
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-step-by-step-breakdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Step-by-Step Breakdown
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.2 Step-by-Step Breakdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-parse-dates" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Parse dates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-compute-duration_months" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Compute duration_months
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-time-since-last-active-t-in-years" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Time since last active (T in years)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-source-weight" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Source weight
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-decay-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Decay parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-duration-growth" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Duration growth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-time-consumption" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Time consumption
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-final-xp-formula" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Final XP formula
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-capability-xp-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – Capability XP Pipeline
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-curve-intuitions-and-example-shapes" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Curve Intuitions and Example Shapes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Curve Intuitions and Example Shapes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-duration-growth-different-growth-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Duration Growth – Different Growth Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-time-decay-decay_factort" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Time Decay – decay_factor(T)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-end-to-end-data-flow-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. End-to-End Data Flow Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../admonitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Admonitions
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../code-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code examples
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../content-tab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Content tab
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../diagram-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Diagram Examples
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Gateway Setup
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../load-balancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Load Balancer Setup
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory-system-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory System API Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ontology_update_call/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ontology Update Parameters Guide
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sbert-chroma/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SENTENCE EMBEDDINGS &amp; CHROMADB
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../secret-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secret Manager
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../workdna-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WORK DNA AI
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workdna-calculations-full-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        WorkDNA Calculations – Full Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Core Concepts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-global-constants-and-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Global Constants and Calibration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Global Constants and Calibration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-master-xp-and-source-limits" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Master XP and Source Limits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-growth-exponents" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Growth Exponents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-mastery-durations" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Mastery Durations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-derived-c-coefficients" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Derived C Coefficients
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-growth-types-lookup-growth_types" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.5 Growth Types Lookup (GROWTH_TYPES)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-level-scaling-constants" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.6 Level Scaling Constants
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-decay-floor" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.7 Decay Floor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-utility-functions-and-their-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Utility Functions and Their Variables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Utility Functions and Their Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-probability_to_xpprobability-float-capability_xp-int-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 probability_to_xp(probability: float, capability_xp: int) -&gt; int
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-get_volatility_rate-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 get_volatility_rate() -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-get_decay_base-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 get_decay_base() -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-get_capability_growth_paramsgrowth_type-str-c-k" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 get_capability_growth_params(growth_type: str) -&gt; (C, k)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-get_time_consumption_mock-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5 get_time_consumption_mock(...) -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-duration_growth_factorduration_months-float-growth_type-str-linear-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.6 duration_growth_factor(duration_months: float, growth_type: str = "linear") -&gt; float
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37-max_xp_at_masterygrowth_type-str-source_weight-int-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.7 max_xp_at_mastery(growth_type: str, source_weight: int) -&gt; float
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-xp-level-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. XP ↔ Level Conversion
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. XP ↔ Level Conversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-xp_to_levelxp-int-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 xp_to_level(xp: int) -&gt; float
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 xp_to_level(xp: int) -&gt; float">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-values-illustrative" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example values (illustrative)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-xp-level-logarithmic-curve" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – XP → Level (logarithmic curve)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-level_to_xplevel-float-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 level_to_xp(level: float) -&gt; int
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-source-weighting" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Source Weighting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Source Weighting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-source_to_weightsource-optionalstr-end_date-optionaldatetime-none-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 source_to_weight(source: Optional[str], end_date: Optional[datetime] = None) -&gt; int
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-workdna-aggregation-from-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. WorkDNA Aggregation from Capabilities
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. WorkDNA Aggregation from Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-compute_workdnacapabilities-listdict-dictstr-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 compute_workdna(capabilities: List[Dict]) -&gt; Dict[str, int]
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 compute_workdna(capabilities: List[Dict]) -&gt; Dict[str, int]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-from-capabilities-to-node-xp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – From Capabilities to Node XP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-calculate_new_node_levelprevious_node_level-float-xp-int-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 calculate_new_node_level(previous_node_level: float, xp: int) -&gt; float
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 calculate_new_node_level(previous_node_level: float, xp: int) -&gt; float">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-incremental-level-update" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – Incremental Level Update
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-full-capability-xp-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Full Capability XP Calculation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Full Capability XP Calculation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-calculate_node_xp-int" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 calculate_node_xp(...) -&gt; int
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-step-by-step-breakdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Step-by-Step Breakdown
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.2 Step-by-Step Breakdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-parse-dates" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Parse dates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-compute-duration_months" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Compute duration_months
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-time-since-last-active-t-in-years" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Time since last active (T in years)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-source-weight" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Source weight
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-decay-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Decay parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-duration-growth" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Duration growth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-time-consumption" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Time consumption
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-final-xp-formula" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Final XP formula
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-capability-xp-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagram – Capability XP Pipeline
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-curve-intuitions-and-example-shapes" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Curve Intuitions and Example Shapes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Curve Intuitions and Example Shapes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-duration-growth-different-growth-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Duration Growth – Different Growth Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-time-decay-decay_factort" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Time Decay – decay_factor(T)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-end-to-end-data-flow-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. End-to-End Data Flow Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>WORKDNA CALCULATIONS</h1>

<h2 id="workdna-calculations-full-reference">WorkDNA Calculations – Full Reference</h2>
<p>This document explains all the formulas, constants, and variables used in <code>src/dna_converter.py</code>.<br />
It also includes diagrams to show how data flows through the system and how the core curves behave.</p>
<hr />
<h2 id="1-core-concepts">1. Core Concepts</h2>
<ul>
<li>
<p><strong>XP (Experience Points)</strong>:<br />
  Continuous numeric score that accumulates evidence for a capability or WorkDNA node. Higher XP = stronger, more reliable evidence.</p>
</li>
<li>
<p><strong>Level (0–5)</strong>:<br />
  Human-friendly representation of XP on a fixed scale:</p>
</li>
<li>0: no/very weak evidence</li>
<li>1: basic exposure</li>
<li>3: solid practitioner</li>
<li>
<p>5: mastery (targeted around 1000 XP)</p>
</li>
<li>
<p><strong>Source</strong>:<br />
  Where the capability evidence comes from (job, certification, portfolio, self-reported skills, etc.). Different sources have different <strong>weights</strong>.</p>
</li>
<li>
<p><strong>Growth Type</strong>:<br />
  Shape of how XP grows with <strong>duration</strong> of experience:</p>
</li>
<li><strong>Saturating</strong> – big early gains, then diminishing returns.</li>
<li><strong>Linear</strong> – each month adds roughly the same amount.</li>
<li>
<p><strong>Compounding</strong> – later years are even more valuable than early ones.</p>
</li>
<li>
<p><strong>Time Decay</strong>:<br />
  Older experience is discounted versus more recent experience, but never falls below a floor (e.g., at least 40% of value is kept).</p>
</li>
<li>
<p><strong>Time Consumption</strong>:<br />
  Fraction of time spent on a capability (part-time vs full-time). Currently mocked as 1.0 (full-time equivalent) but designed to support real fractions later.</p>
</li>
</ul>
<hr />
<h2 id="2-global-constants-and-calibration">2. Global Constants and Calibration</h2>
<p>All of these live at module level in <code>dna_converter.py</code> and are computed once at import.</p>
<h3 id="21-master-xp-and-source-limits">2.1 Master XP and Source Limits</h3>
<ul>
<li>
<p><strong><code>MAX_XP = 1000</code></strong><br />
  Target XP at mastery (corresponds roughly to <strong>level ≈ 5</strong>).</p>
</li>
<li>
<p><strong><code>MAX_SOURCE_WEIGHT = 6</code></strong><br />
  Highest possible weight for a source, used mainly for calibration.<br />
  Examples: <code>current_job</code>, <code>project_task_delivery</code> both use weight 6.</p>
</li>
</ul>
<hr />
<h3 id="22-growth-exponents">2.2 Growth Exponents</h3>
<p>These define how sharply XP grows with time:</p>
<ul>
<li><strong><code>K_SATURATING = 0.5</code></strong> – sublinear, diminishing returns.</li>
<li><strong><code>K_LINEAR = 1.0</code></strong> – linear growth.</li>
<li><strong><code>K_COMPOUNDING = 1.2</code></strong> – superlinear, accelerating growth.</li>
</ul>
<p>General growth term:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>f(\text{duration\_months}) = C \cdot \text{duration\_months}^{k}
</span></code></pre></div>
<ul>
<li><code>C</code>: growth coefficient for that type.</li>
<li><code>k</code>: one of the exponents above.</li>
</ul>
<hr />
<h3 id="23-mastery-durations">2.3 Mastery Durations</h3>
<p>These encode “how many months until mastery” for each growth type:</p>
<ul>
<li><strong><code>MASTERY_MONTHS_SATURATING = 144</code></strong> (12 years)</li>
<li><strong><code>MASTERY_MONTHS_LINEAR = 144</code></strong> (12 years)</li>
<li><strong><code>MASTERY_MONTHS_COMPOUNDING = 240</code></strong> (20 years)</li>
</ul>
<p>At these durations, with <code>source_weight = MAX_SOURCE_WEIGHT</code> and no decay, we want:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>\text{XP} \approx \text{MAX\_XP} = 1000
</span></code></pre></div>
<hr />
<h3 id="24-derived-c-coefficients">2.4 Derived C Coefficients</h3>
<p>We solve for (C) so that at mastery we get <code>MAX_XP</code> from a max-weight source:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>C = \frac{\text{MAX\_XP}}{\text{MAX\_SOURCE\_WEIGHT} \cdot \text{calibration\_months}^{k}}
</span></code></pre></div>
<p>In code:</p>
<ul>
<li><strong><code>C_SATURATING</code></strong>:</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>C_{\text{saturating}} =
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>\frac{1000}{6 \cdot (144)^{0.5}}
</span></code></pre></div>
<ul>
<li><strong><code>C_LINEAR</code></strong>:</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>C_{\text{linear}} =
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>\frac{1000}{6 \cdot (144)^{1.0}}
</span></code></pre></div>
<ul>
<li><strong><code>C_COMPOUNDING</code></strong>:</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>C_{\text{compounding}} =
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>\frac{1000}{6 \cdot (240)^{1.2}}
</span></code></pre></div>
<p>These are precomputed on import and stored in <code>GROWTH_TYPES</code>.</p>
<hr />
<h3 id="25-growth-types-lookup-growth_types">2.5 Growth Types Lookup (<code>GROWTH_TYPES</code>)</h3>
<p><code>GROWTH_TYPES</code> is a dictionary:</p>
<ul>
<li>Keys: <code>"saturating"</code>, <code>"linear"</code>, <code>"compounding"</code> (case-insensitive in usage).</li>
<li>Values: dictionaries with:</li>
<li><strong><code>"k"</code></strong>: exponent $k$.</li>
<li><strong><code>"C"</code></strong>: coefficient $C$.</li>
<li><strong><code>"calibration_months"</code></strong>: mastery duration used during calibration.</li>
</ul>
<p>This powers:</p>
<ul>
<li><code>get_capability_growth_params(growth_type)</code></li>
<li><code>duration_growth_factor(duration_months, growth_type)</code></li>
<li><code>max_xp_at_mastery(growth_type, source_weight)</code></li>
</ul>
<hr />
<h3 id="26-level-scaling-constants">2.6 Level Scaling Constants</h3>
<p>The XP → Level mapping uses a logarithmic curve with:</p>
<ul>
<li><strong><code>S_SCALING_FACTOR = 50</code></strong> (S): horizontal stretch parameter.</li>
<li><strong><code>A_SCALING_FACTOR</code></strong> (A): vertical gain parameter, computed as:</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>A = \frac{5}{\ln\left(\frac{1 + \text{MAX\_XP}}{S}\right)}
</span></code></pre></div>
<p>This makes sure that around <code>XP ≈ MAX_XP (1000)</code>, we are near Level 5.</p>
<p>If something goes wrong in the computation (e.g., invalid inputs), the code falls back to:</p>
<ul>
<li><code>A_SCALING_FACTOR = 1.642</code></li>
</ul>
<p>These two constants are used in:</p>
<ul>
<li><code>xp_to_level(xp)</code></li>
<li><code>level_to_xp(level)</code></li>
</ul>
<hr />
<h3 id="27-decay-floor">2.7 Decay Floor</h3>
<ul>
<li><strong><code>DECAY_BASE = 0.4</code></strong></li>
</ul>
<p>Defines the minimum fraction of XP that remains even for very old experience.<br />
The decay function is:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>\text{decay\_factor}(T) = \text{Base} + (1 - \text{Base}) \cdot e^{-\lambda T}
</span></code></pre></div>
<p>Where:
- $T$ = years since the capability was last active.
- $\lambda$ = volatility rate (from <code>get_volatility_rate()</code>).</p>
<p>With <code>Base = 0.4</code>:
- Very recent experience (T ≈ 0) ⇒ factor close to 1.0.
- Very old experience (T large) ⇒ factor approaches 0.4.</p>
<hr />
<h2 id="3-utility-functions-and-their-variables">3. Utility Functions and Their Variables</h2>
<p>This section maps each public function to its formula and variable meanings.</p>
<h3 id="31-probability_to_xpprobability-float-capability_xp-int-int">3.1 <code>probability_to_xp(probability: float, capability_xp: int) -&gt; int</code></h3>
<p><strong>Purpose</strong>: Turn a model probability into XP for a node, scaled by capability strength.</p>
<p><strong>Inputs</strong>:
- <strong><code>probability</code></strong>: float in $[0, 1]$, probability that a given node is relevant.
- <strong><code>capability_xp</code></strong>: XP of the capability itself (usually from <code>calculate_node_xp</code>).</p>
<p><strong>Computation</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>\text{raw\_xp} = \text{probability} \cdot \text{capability\_xp}
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>\text{gained\_xp} = \max(1, \text{round(raw\_xp)})
</span></code></pre></div>
<p><strong>Key variables</strong>:
- <code>probability</code>: node relevance confidence.
- <code>capability_xp</code>: strength of the underlying capability.
- <code>gained_xp</code>: XP increment assigned to the node.</p>
<hr />
<h3 id="32-get_volatility_rate-float">3.2 <code>get_volatility_rate() -&gt; float</code></h3>
<p><strong>Purpose</strong>: Returns the decay rate (\lambda) for time-based discounting.</p>
<p><strong>Current value</strong>:</p>
<ul>
<li><code>λ = 0.11</code></li>
</ul>
<p>Used in:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>\text{decay\_factor}(T) = \text{Base} + (1 - \text{Base}) \cdot e^{-\lambda T}
</span></code></pre></div>
<p><strong>Variable meaning</strong>:
- <code>λ</code> (lambda): higher means faster decay; lower means slower decay.</p>
<hr />
<h3 id="33-get_decay_base-float">3.3 <code>get_decay_base() -&gt; float</code></h3>
<p><strong>Purpose</strong>: Returns the asymptotic floor (<code>Base</code>) for decay.</p>
<p><strong>Value</strong>:
- <code>Base = DECAY_BASE = 0.4</code>.</p>
<p>This ensures that even very old experience never drops below 40% of its XP.</p>
<hr />
<h3 id="34-get_capability_growth_paramsgrowth_type-str-c-k">3.4 <code>get_capability_growth_params(growth_type: str) -&gt; (C, k)</code></h3>
<p><strong>Purpose</strong>: For a given growth type, return the pair:
- <code>C</code>: coefficient.
- <code>k</code>: exponent.</p>
<p>Used from <code>GROWTH_TYPES</code>, defaults to <code>"linear"</code> for unknown inputs.</p>
<hr />
<h3 id="35-get_time_consumption_mock-float">3.5 <code>get_time_consumption_mock(...) -&gt; float</code></h3>
<p><strong>Purpose</strong>: Placeholder that returns <code>1.0</code> for now.</p>
<p>Intended future meaning:
- 1.0 = full-time.
- 0.5 = half-time, etc.</p>
<p>Currently:
- Ignores <code>source</code>, <code>start_date</code>, <code>end_date</code>, <code>**kwargs</code>.
- Always returns <code>1.0</code>.</p>
<hr />
<h3 id="36-duration_growth_factorduration_months-float-growth_type-str-linear-float">3.6 <code>duration_growth_factor(duration_months: float, growth_type: str = "linear") -&gt; float</code></h3>
<p><strong>Purpose</strong>: Compute the growth term $f(\text{duration}_\text{months})$.</p>
<p><strong>Inputs</strong>:
- <code>duration_months</code>: total active time in months.
- <code>growth_type</code>: <code>"saturating"</code>, <code>"linear"</code>, or <code>"compounding"</code>.</p>
<p><strong>Computation</strong>:</p>
<ol>
<li>Retrieve $(C,k)$ from <code>get_capability_growth_params(growth_type)</code>.</li>
<li>Clamp duration:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>\text{duration\_months\_clamped} = \max(1.0, \text{duration\_months})
</span></code></pre></div>
<ol>
<li>Compute:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>\text{duration\_factor} = C \cdot (\text{duration\_months\_clamped})^{k}
</span></code></pre></div>
<p><strong>Variable meanings</strong>:
- <code>duration_months</code>: raw months of experience.
- <code>duration_factor</code>: growth multiplier feeding into the XP formula.</p>
<hr />
<h3 id="37-max_xp_at_masterygrowth_type-str-source_weight-int-float">3.7 <code>max_xp_at_mastery(growth_type: str, source_weight: int) -&gt; float</code></h3>
<p><strong>Purpose</strong>: Compute the theoretical XP at mastery duration, ignoring decay and time consumption.</p>
<p><strong>Steps</strong>:</p>
<ol>
<li>From <code>GROWTH_TYPES[growth_type]</code>, read:</li>
<li><code>C</code>, <code>k</code>, <code>calibration_months</code>.</li>
<li>Compute:</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>\text{XP\_max} = \text{source\_weight} \cdot C \cdot (\text{calibration\_months})^{k}
</span></code></pre></div>
<p><strong>Intended usage</strong>:
- Sanity-check the calibration.
- Tune <code>C</code> or durations if needed.</p>
<hr />
<h2 id="4-xp-level-conversion">4. XP ↔ Level Conversion</h2>
<h3 id="41-xp_to_levelxp-int-float">4.1 <code>xp_to_level(xp: int) -&gt; float</code></h3>
<p><strong>Purpose</strong>: Map a raw XP amount to a WorkDNA level in $[0, 5]$.</p>
<p><strong>Formula</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>\text{level\_raw} = A \cdot \ln\left(1 + \frac{\text{XP}}{S}\right)
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>\text{level} = \min(\text{level\_raw}, 5)
</span></code></pre></div>
<p>Where:
- <code>A = A_SCALING_FACTOR</code>
- <code>S = S_SCALING_FACTOR</code></p>
<p><strong>Variables</strong>:
- <code>xp</code>: current experience points for a node.
- <code>level</code>: level (rounded to 2 decimals, capped at 5).</p>
<h4 id="example-values-illustrative">Example values (illustrative)</h4>
<table>
<thead>
<tr>
<th>XP</th>
<th>Level (approx)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0.00</td>
</tr>
<tr>
<td>50</td>
<td>~1.0</td>
</tr>
<tr>
<td>200</td>
<td>~2.3</td>
</tr>
<tr>
<td>500</td>
<td>~3.6</td>
</tr>
<tr>
<td>1000</td>
<td>~5.0 (cap)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Exact values depend on <code>A_SCALING_FACTOR</code> outcome, but the qualitative behavior holds: fast early growth, then flattening.</p>
</blockquote>
<h4 id="diagram-xp-level-logarithmic-curve">Diagram – XP → Level (logarithmic curve)</h4>
<pre class="mermaid"><code>%% Conceptual shape only
graph LR
    A[XP = 0] --&gt; B[XP = 50&lt;br/&gt;Level ~ 1]
    B --&gt; C[XP = 200&lt;br/&gt;Level ~ 2.3]
    C --&gt; D[XP = 500&lt;br/&gt;Level ~ 3.6]
    D --&gt; E[XP = 1000&lt;br/&gt;Level = 5]</code></pre>
<hr />
<h3 id="42-level_to_xplevel-float-int">4.2 <code>level_to_xp(level: float) -&gt; int</code></h3>
<p><strong>Purpose</strong>: Inverse mapping – given a level, return the equivalent XP.</p>
<p><strong>Inverse Formula</strong>:</p>
<p>From:
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>\text{level} = A \cdot \ln\left(1 + \frac{\text{XP}}{S}\right)
</span></code></pre></div></p>
<p>We derive:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>\text{XP} = S \cdot \left(e^{\frac{\text{level}}{A}} - 1\right)
</span></code></pre></div>
<p><strong>Implementation</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>\text{xp} = S\_{\text{SCALING\_FACTOR}} \cdot \left(\exp\left(\frac{\text{level}}{A\_{\text{SCALING\_FACTOR}}}\right) - 1\right)
</span></code></pre></div>
<p><strong>Variables</strong>:
- <code>level</code>: node level in [0, 5].
- <code>xp</code>: XP quantity corresponding to that level.</p>
<hr />
<h2 id="5-source-weighting">5. Source Weighting</h2>
<h3 id="51-source_to_weightsource-optionalstr-end_date-optionaldatetime-none-int">5.1 <code>source_to_weight(source: Optional[str], end_date: Optional[datetime] = None) -&gt; int</code></h3>
<p><strong>Purpose</strong>: Convert a free-text description of a source into an integer weight.</p>
<p><strong>Key pieces</strong>:</p>
<ul>
<li><strong><code>source_weights</code></strong>:</li>
<li><code>current_job</code>: 6</li>
<li><code>project_task_delivery</code>: 6</li>
<li><code>certification_accreditation</code>: 5</li>
<li><code>leadership_mentorship_role</code>: 5</li>
<li><code>conference_publication_patent</code>: 5</li>
<li><code>past_job</code>: 6</li>
<li><code>performance_review_mention</code>: 4</li>
<li><code>portfolio_public_repository</code>: 4</li>
<li><code>university_major_minor</code>: 3</li>
<li><code>volunteer_side_project_mention</code>: 2</li>
<li>
<p><code>self_reported_skill_list</code>: 1</p>
</li>
<li>
<p><strong><code>source_keywords</code></strong>: maps these categories to keyword lists (e.g. "certification", "portfolio", "university", "volunteer", etc.).</p>
</li>
<li>
<p><strong><code>job_mapping</code></strong>: keywords that signal a job (e.g. "job", "role", "engineer", "developer", etc.).</p>
</li>
</ul>
<p><strong>Logic</strong>:</p>
<ol>
<li>If <code>source</code> is <code>None</code> or empty → return <code>1</code>.</li>
<li>Lowercase <code>source</code> to <code>source_lower</code>.</li>
<li>If any keyword from <code>job_mapping</code> appears in <code>source_lower</code>:</li>
<li>Parse <code>end_date</code> if string.</li>
<li>Compute <code>three_months_ago = today - 90 days</code>.</li>
<li>If <code>end_date</code> missing or ≥ <code>three_months_ago</code> → treat as <code>current_job</code> (weight 6).</li>
<li>Else → treat as <code>past_job</code> (weight 6).</li>
<li>If not a job:</li>
<li>For each <code>(category, keywords)</code> in <code>source_keywords</code>:<ul>
<li>If any keyword appears in <code>source_lower</code> → return <code>source_weights[category]</code>.</li>
</ul>
</li>
<li>If no match → return <code>1</code>.</li>
</ol>
<p><strong>Variables</strong>:
- <code>source</code>: textual description (job title, course name, etc.).
- <code>end_date</code>: used to determine recency of a job.
- <code>source_weight</code>: numeric weight 1–6.</p>
<hr />
<h2 id="6-workdna-aggregation-from-capabilities">6. WorkDNA Aggregation from Capabilities</h2>
<h3 id="61-compute_workdnacapabilities-listdict-dictstr-int">6.1 <code>compute_workdna(capabilities: List[Dict]) -&gt; Dict[str, int]</code></h3>
<p><strong>Purpose</strong>: Aggregate per-node XP from a list of capabilities and their predicted nodes.</p>
<p><strong>Expected capability structure (simplified)</strong>:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">  </span><span class="nt">&quot;proficiencyLevel&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">  </span><span class="nt">&quot;predicted_nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NODE_1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;probability&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NODE_2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;probability&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Algorithm</strong>:</p>
<p>For each capability <code>cap</code>:
1. <code>exp_weight = cap["proficiencyLevel"]</code>
2. For each <code>node</code> in <code>cap["predicted_nodes"]</code>:
   - <code>node_id = node["id"]</code>
   - <code>prob = node["probability"]</code>
   - <code>gained_xp = probability_to_xp(prob, exp_weight)</code>
   - Increment:
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>\text{node\_xp}[node\_id] \mathrel{+}= \text{gained\_xp}
</span></code></pre></div></p>
<p><strong>Output</strong>:
- <code>node_xp</code>: dictionary <code>{ node_id: total_xp }</code>.</p>
<p><strong>Variables</strong>:
- <code>capabilities</code>: list of capability dicts.
- <code>exp_weight</code>: capability-level XP (strength).
- <code>node_id</code>: WorkDNA node identifier.
- <code>prob</code>: model probability of node activation.
- <code>gained_xp</code>: XP increment for that node from that capability.</p>
<h4 id="diagram-from-capabilities-to-node-xp">Diagram – From Capabilities to Node XP</h4>
<pre class="mermaid"><code>flowchart LR
    A[Capabilities List] --&gt; B[Capability i&lt;br/&gt;proficiencyLevel]
    A --&gt; C[Capability i&lt;br/&gt;predicted_nodes]
    C --&gt; D[Node j&lt;br/&gt;probability]
    B --&gt; E[probability_to_xp]
    D --&gt; E
    E --&gt; F[XP for Node j]
    F --&gt; G["Aggregate node_xp[node_id]"]</code></pre>
<hr />
<h3 id="62-calculate_new_node_levelprevious_node_level-float-xp-int-float">6.2 <code>calculate_new_node_level(previous_node_level: float, xp: int) -&gt; float</code></h3>
<p><strong>Purpose</strong>: Update a node’s level after adding some extra XP.</p>
<p><strong>Inputs</strong>:
- <code>previous_node_level</code>: existing level in [0, 5].
- <code>xp</code>: change in XP (usually positive, could be negative if used that way).</p>
<p><strong>Steps</strong>:
1. Convert old level to XP:
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>\text{xp\_node} = \text{level\_to\_xp(previous\_node\_level)}
</span></code></pre></div>
2. Add XP delta:
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>\text{xp\_total} = \text{xp\_node} + \text{xp}
</span></code></pre></div>
3. Convert back to level:
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>\text{new\_level} = \text{xp\_to\_level(xp\_total)}
</span></code></pre></div></p>
<p><strong>Output</strong>:
- New level (capped by the logic in <code>xp_to_level</code>, i.e. max 5).</p>
<h4 id="diagram-incremental-level-update">Diagram – Incremental Level Update</h4>
<pre class="mermaid"><code>flowchart LR
    A[previous_node_level] --&gt; B[level_to_xp]
    B --&gt; C[existing XP]
    D[delta XP] --&gt; E[XP sum]
    C --&gt; E
    E --&gt; F[xp_to_level]
    F --&gt; G[new_node_level]</code></pre>
<hr />
<h2 id="7-full-capability-xp-calculation">7. Full Capability XP Calculation</h2>
<h3 id="71-calculate_node_xp-int">7.1 <code>calculate_node_xp(...) -&gt; int</code></h3>
<p><strong>Purpose</strong>: Compute total XP for one capability instance by combining:
- Duration of experience.
- Source strength.
- Time decay.
- Growth type (shape of experience curve).
- Time consumption.</p>
<p><strong>Signature (simplified)</strong>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">calculate_node_xp</span><span class="p">(</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>    <span class="n">source</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    <span class="n">start_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>    <span class="n">end_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>    <span class="n">growth_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;linear&quot;</span><span class="p">,</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>    <span class="n">time_consumption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</span></code></pre></div>
<hr />
<h3 id="72-step-by-step-breakdown">7.2 Step-by-Step Breakdown</h3>
<h4 id="1-parse-dates">1. Parse dates</h4>
<ul>
<li><code>start_date_dt = parse_date(start_date)</code></li>
<li><code>end_date_dt = parse_date(end_date)</code></li>
</ul>
<p>Each returns a <code>date</code> object or <code>None</code>.</p>
<h4 id="2-compute-duration_months">2. Compute <code>duration_months</code></h4>
<p>Four cases:</p>
<ul>
<li><strong>Case 1 – both missing</strong>:</li>
<li><code>duration_months = 6</code></li>
<li>
<p><code>end_date_dt = today</code></p>
</li>
<li>
<p><strong>Case 2 – only <code>end_date</code></strong>:</p>
</li>
<li>
<p><code>duration_months = 12</code></p>
</li>
<li>
<p><strong>Case 3 – only <code>start_date</code> (ongoing)</strong>:</p>
</li>
<li><code>end_date_dt = today</code></li>
<li>
<p>Months between start and today:
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>\text{duration\_months} =
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>\max\left(1,\ (\text{end\_year} - \text{start\_year}) \cdot 12 + (\text{end\_month} - \text{start\_month})\right)
</span></code></pre></div></p>
</li>
<li>
<p><strong>Case 4 – both provided</strong>:</p>
</li>
<li>Similar computation, but between <code>start_date_dt</code> and <code>end_date_dt</code>.</li>
</ul>
<p>Always clamped to at least 1 month.</p>
<h4 id="3-time-since-last-active-t-in-years">3. Time since last active (<code>T</code> in years)</h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>T = \frac{\text{(today - end\_date\_dt).days}}{365.0}
</span></code></pre></div>
<p>This feeds into the decay function.</p>
<h4 id="4-source-weight">4. Source weight</h4>
<ul>
<li><code>source_weight = source_to_weight(source, end_date_dt)</code></li>
</ul>
<p>Returns an integer (typically 1–6) based on the logic in section 5.</p>
<h4 id="5-decay-parameters">5. Decay parameters</h4>
<ul>
<li><code>λ = get_volatility_rate()</code> (≈ 0.11).</li>
<li><code>base = get_decay_base()</code> (0.4).</li>
</ul>
<p>Compute:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>\text{decay\_factor} = \text{base} + (1.0 - \text{base}) \cdot e^{-\lambda T}
</span></code></pre></div>
<h4 id="6-duration-growth">6. Duration growth</h4>
<ul>
<li><code>duration_factor = duration_growth_factor(duration_months, growth_type)</code></li>
</ul>
<p>This uses:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>\text{duration\_factor} = C \cdot \text{duration\_months}^{k}
</span></code></pre></div>
<p>with <code>C</code> and <code>k</code> from <code>GROWTH_TYPES[growth_type]</code>.</p>
<h4 id="7-time-consumption">7. Time consumption</h4>
<ul>
<li>If <code>time_consumption</code> is <code>None</code>:</li>
<li>Use <code>get_time_consumption_mock(...)</code> → <code>1.0</code>.</li>
<li>Then:</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>\text{time\_consumption} = \max(0.0, \text{float(time\_consumption)})
</span></code></pre></div>
<h4 id="8-final-xp-formula">8. Final XP formula</h4>
<p>Putting everything together:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>\text{XP} = \text{source\_weight} \cdot \text{decay\_factor} \cdot \text{duration\_factor} \cdot \text{time\_consumption}
</span></code></pre></div>
<p>Code:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">xp</span> <span class="o">=</span> <span class="n">source_weight</span> <span class="o">*</span> <span class="n">decay_factor</span> <span class="o">*</span> <span class="n">duration_factor</span> <span class="o">*</span> <span class="n">time_consumption</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">xp</span><span class="p">))</span>
</span></code></pre></div>
<p><strong>Variables</strong>:
- <code>source_weight</code>: from <code>source_to_weight</code>.
- <code>decay_factor</code>: from <code>T</code>, <code>λ</code>, <code>base</code>.
- <code>duration_factor</code>: from <code>duration_months</code>, <code>growth_type</code>.
- <code>time_consumption</code>: fraction of time spent.
- <code>xp</code>: final capability XP (at least 1).</p>
<h4 id="diagram-capability-xp-pipeline">Diagram – Capability XP Pipeline</h4>
<pre class="mermaid"><code>flowchart TB
    A[Input&lt;br/&gt;source, start_date, end_date, growth_type, time_consumption] --&gt; B[Parse dates]
    B --&gt; C[Compute duration_months]
    C --&gt; D[duration_growth_factor&lt;br/&gt;C * months^k]
    B --&gt; E["Compute T&lt;br/&gt;(years since end)"]
    A --&gt; F[source_to_weight]
    E --&gt; G["decay_factor(T)"]
    A --&gt; H[get_time_consumption_mock or value]

    F --&gt; I[XP = source_weight * decay_factor * duration_factor * time_consumption]
    D --&gt; I
    G --&gt; I
    H --&gt; I
    I --&gt; J[Final capability XP]</code></pre>
<hr />
<h2 id="8-curve-intuitions-and-example-shapes">8. Curve Intuitions and Example Shapes</h2>
<p>These are conceptual examples to illustrate how the main curves behave.</p>
<h3 id="81-duration-growth-different-growth-types">8.1 Duration Growth – Different Growth Types</h3>
<p>For the same total months, different <code>growth_type</code> values yield different <code>duration_factor</code>:</p>
<table>
<thead>
<tr>
<th>Months</th>
<th>Saturating (k=0.5)</th>
<th>Linear (k=1.0)</th>
<th>Compounding (k=1.2)</th>
</tr>
</thead>
<tbody>
<tr>
<td>6</td>
<td>High early boost</td>
<td>Small</td>
<td>Very small</td>
</tr>
<tr>
<td>60</td>
<td>Slower increase</td>
<td>Medium</td>
<td>Large</td>
</tr>
<tr>
<td>120</td>
<td>Approaching plateau</td>
<td>Large</td>
<td>Very large</td>
</tr>
</tbody>
</table>
<p>Conceptually:
- Saturating: strong early returns, then flattens.
- Linear: constant slope.
- Compounding: slow at first, then accelerates.</p>
<h3 id="82-time-decay-decay_factort">8.2 Time Decay – <code>decay_factor(T)</code></h3>
<p>With <code>Base = 0.4</code> and <code>λ = 0.11</code>:</p>
<table>
<thead>
<tr>
<th>T (years since end)</th>
<th>Decay factor (approx)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>~1.0</td>
</tr>
<tr>
<td>1</td>
<td>~0.9</td>
</tr>
<tr>
<td>3</td>
<td>~0.7</td>
</tr>
<tr>
<td>6</td>
<td>~0.55</td>
</tr>
<tr>
<td>10+</td>
<td>≈0.4 (floor)</td>
</tr>
</tbody>
</table>
<p>Interpretation:
- Recent work keeps nearly full value.
- Old work is discounted but never useless.</p>
<hr />
<h2 id="9-end-to-end-data-flow-summary">9. End-to-End Data Flow Summary</h2>
<p>End-to-end, the WorkDNA calculations follow this chain:</p>
<ol>
<li>
<p><strong>Capability metadata</strong> (<code>source</code>, <code>start_date</code>, <code>end_date</code>, <code>growth_type</code>, etc.)<br />
   → <code>calculate_node_xp(...)</code><br />
   → <strong>capability-level XP</strong>.</p>
</li>
<li>
<p><strong>Model predictions</strong> (<code>predicted_nodes</code> with <code>probability</code>) and <strong>capability XP</strong><br />
   → <code>probability_to_xp(prob, capability_xp)</code><br />
   → <strong>per-node XP increments</strong>.</p>
</li>
<li>
<p>Node-level XP increments across all capabilities<br />
   → <code>compute_workdna(capabilities)</code><br />
   → <strong>aggregated XP per node</strong>.</p>
</li>
<li>
<p>Aggregated node XP<br />
   → <code>xp_to_level(xp)</code><br />
   → <strong>WorkDNA levels (0–5)</strong>.</p>
</li>
<li>
<p>For incremental updates (new evidence over time):  </p>
</li>
<li>Old level + delta XP → <code>calculate_new_node_level(previous_node_level, xp_delta)</code>  </li>
<li>Produces updated level using the same log curve.</li>
</ol>
<p>This ensures that:
- All sources and durations are normalized into a single XP scale.
- Recent experience is favored but old experience is preserved.
- Growth types capture different learning trajectories.
- Final levels are easy to interpret, while remaining mathematically grounded.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../Solid/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Solid">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Solid
              </div>
            </div>
          </a>
        
        
          
          <a href="../admonitions/" class="md-footer__link md-footer__link--next" aria-label="Next: Admonitions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Admonitions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Karrera.AI
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.google.com" target="_blank" rel="noopener" title="www.google.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.google.com" target="_blank" rel="noopener" title="www.google.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.498 6.186a3.02 3.02 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.02 3.02 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.02 3.02 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.02 3.02 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814M9.545 15.568V8.432L15.818 12z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.footer"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>