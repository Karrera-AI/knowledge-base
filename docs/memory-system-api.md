
# Memory System API Documentation

## Overview

The Memory System is designed to manage user memory entries generated by the AI. It enables the creation, listing, and management of narratives, memories, and items that summarize changes to a user's PI (Personal Information) file. The system supports two main types of agents:

- **End User**: Interacts with the system using a valid `session-id` (Solid session), can view and update the status of memories (approve/discard).
- **Automated AI Agent**: Uses an API key to create new narratives and memories based on AI output, operating with a service account to access user pods even when users are not logged in.

All API details, including request/response schemas and examples, are available in the (Swagger UI)[https://solid-dev.karrera.ai/api-docs/].

---

## High-Level Logic

1. **Narrative Creation**: Narratives are created by the AI agent and contain a list of memories. Each memory contains a list of items representing changes to the user's PI file.
2. **Memory Review**: Users can view their narratives and the contained memories. For each memory, the user can approve or discard it.
3. **Memory Status Update**: Approved memories apply their changes to the PI file and are moved to a long-term archive folder based on the date. Discarded memories are moved to a discarded folder.

---

## API Endpoints

### End User Endpoints (`/memory/*`)

These endpoints require a valid `session-id` header and allow users to:

- **List Narratives**: View all narratives associated with the user.
- **Get Memory Details**: Retrieve details about a specific memory.
- **Get Item Details**: Retrieve details about a specific item within a memory.
- **Change Memory Status**: Approve or discard a memory, triggering the application or rejection of its changes.

See the (Swagger UI)[https://solid-dev.karrera.ai/api-docs/] for full endpoint details and usage.

### AI Agent/Internal Endpoints (`/internal/*`)

These endpoints require a valid `x-api-key` header and are intended for automated agents:

- **Create Narrative**: Add a new narrative (with memories and items) to a user's pod.
- **Create Artifacts**: Add new artifacts to the internal storage.
- **Update PI**: Update the user's PI file with new information.
- **Download File**: Retrieve files from internal storage.

See the (Swagger UI)[https://solid-dev.karrera.ai/api-docs/] for full endpoint details and usage.

---

## Additional Notes

- All endpoints are protected and require appropriate authentication (either `session-id` or `x-api-key`).
- The system is designed to work with Solid pods, ensuring user data privacy and control.
- For detailed request/response formats, error codes, and examples, refer to the (Swagger documentation)[https://solid-dev.karrera.ai/api-docs/]
